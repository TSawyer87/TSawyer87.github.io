<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Posts | NixOS Blog</title><meta name=keywords content><meta name=description content="Posts - NixOS Blog"><meta name=author content><link rel=canonical href=https://tsawyer87.github.io/posts/><link crossorigin=anonymous href=/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css integrity="sha256-j+ECM6cGvIfy4Is8+XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as=style><link rel=icon href=https://tsawyer87.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://tsawyer87.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://tsawyer87.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://tsawyer87.github.io/apple-touch-icon.png><link rel=mask-icon href=https://tsawyer87.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://tsawyer87.github.io/posts/index.xml><link rel=alternate hreflang=en href=https://tsawyer87.github.io/posts/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://tsawyer87.github.io/posts/"><meta property="og:site_name" content="NixOS Blog"><meta property="og:title" content="Posts"><meta property="og:locale" content="en-us"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="Posts"><meta name=twitter:description content><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://tsawyer87.github.io/posts/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://tsawyer87.github.io/ accesskey=h title="NixOS Blog (Alt + H)">NixOS Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
<a href=/index.xml title="RSS Feed"><img src=/rss.png alt="RSS Feed" style=width:24px;height:24px></a></div></div><ul id=menu></ul></nav></header><main class=main><header class=page-header><h1>Posts</h1></header><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Using_overlays_to_add_packages</h2></header><div class=entry-content><p>Using Overlays to add Packages that aren’t in Nixpkgs It is very common to use overlays in Nix to install packages that aren’t available in the standard Nixpkgs repository.
Overlays are one of the primary and recommended ways to extend and customize your Nix environment. It’s important to remember that Nix overlays are made to allow you to modify or extend the package set provided by Nixpkgs (or other Nix sources) without directly altering the original package definitions. This is crucial for maintaining reproducibility and avoiding conflicts. Overlays are essentially functions that take the previous package set and allow you to add, modify, or remove packages.
...</p></div><footer class=entry-footer><span title='2025-05-14 19:28:57 -0400 EDT'>May 14, 2025</span>&nbsp;·&nbsp;T Sawyer</footer><a class=entry-link aria-label="post link to Using_overlays_to_add_packages" href=https://tsawyer87.github.io/posts/using_overlays_to_add_packages/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Nix_lang_basics</h2></header><div class=entry-content><p>The Nix Language Nix as a programming language can be thought of as a kind of “JSON, but with functions”.
All statements are declarative, meaning that there’s no sequential flow of instructions that makes up a Nix package. Instead, functions are called that assign values to fields in attribute sets, which in turn may get assigned to other values.
How does Nix work Nix is a pure, functional, lazy, declarative, and reproducible programming language.
...</p></div><footer class=entry-footer><span title='2025-05-14 19:28:12 -0400 EDT'>May 14, 2025</span>&nbsp;·&nbsp;T Sawyer</footer><a class=entry-link aria-label="post link to Nix_lang_basics" href=https://tsawyer87.github.io/posts/nix_lang_basics/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Comparing_flakes_to_traditional_nix</h2></header><div class=entry-content><p>Introduction: Flakes and Traditional Nix This post is based on notes from Nix-Hour #4, comparing Traditional Nix and Flakes, focusing on achieving pure build results. See the YouTube video for the original content. This guide adapts the information for clarity and ease of understanding. What is Purity in Nix? A key benefit of Nix Flakes is their default enforcement of pure evaluation.
In Nix, an impure operation depends on something outside its explicit inputs. Examples include:
...</p></div><footer class=entry-footer><span title='2025-05-14 19:27:18 -0400 EDT'>May 14, 2025</span>&nbsp;·&nbsp;T Sawyer</footer><a class=entry-link aria-label="post link to Comparing_flakes_to_traditional_nix" href=https://tsawyer87.github.io/posts/comparing_flakes_to_traditional_nix/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Declarative_depinject</h2></header><div class=entry-content><p>Declarative Dependency Injection in Nix Flakes This post explores a method for injecting dependencies into NixOS modules from a flake in a more declarative way, offering an alternative to specialArgs.
The Problem with specialArgs As mentioned in post, specialArgs and extraSpecialArgs can be used to pass dependencies and variables from flakes to modules.
However, specialArgs injects values directly into every module’s argument list.
This approach deviates from NixOS’s typical declarative data flow model. Instead of explicit dependency passing, modules receive extra, unstructured variables that aren’t part of the standard module options.
...</p></div><footer class=entry-footer><span title='2025-05-14 19:26:36 -0400 EDT'>May 14, 2025</span>&nbsp;·&nbsp;T Sawyer</footer><a class=entry-link aria-label="post link to Declarative_depinject" href=https://tsawyer87.github.io/posts/declarative_depinject/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Derivations_explained</h2></header><div class=entry-content><p>Introduction to Nix Derivations A derivation in Nix is a fundamental concept that describes how to build a piece of software or a resource (e.g., a package, library, or configuration file). Think of it as a recipe for creating something within the Nix ecosystem.
For beginners, the analogy of a cooking recipe is helpful:
Ingredients (Dependencies): What other software or libraries are needed. Steps (Build Instructions): The commands to compile, configure, and install. Final Dish (Output): The resulting package or resource. A Nix derivation encapsulates all this information, telling Nix what inputs to use, how to build it, and what the final output should be.
...</p></div><footer class=entry-footer><span title='2025-05-14 19:25:48 -0400 EDT'>May 14, 2025</span>&nbsp;·&nbsp;T Sawyer</footer><a class=entry-link aria-label="post link to Derivations_explained" href=https://tsawyer87.github.io/posts/derivations_explained/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Simple_nix_service</h2></header><div class=entry-content><p>Building a Custom NixOS Service with Flakes and Overlays TL;DR NixOS’s declarative configuration and flakes make it easy to create custom services. This post shows how to build a minimal service using flakes and overlays for a “meow” command
This will be a complete minimal configuration for testing purposes. Create Project Directory Start by creating a directory to hold your project, I called mine meow:
mkdir meow && cd meow Create flake Create a flake.nix with the following:
...</p></div><footer class=entry-footer><span title='2025-05-14 19:25:11 -0400 EDT'>May 14, 2025</span>&nbsp;·&nbsp;T Sawyer</footer><a class=entry-link aria-label="post link to Simple_nix_service" href=https://tsawyer87.github.io/posts/simple_nix_service/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Nix_flakes_tips</h2></header><div class=entry-content><p>Shallow Clone Nixpkgs Shallow clone nixpkgs, the full Git history isn’t always necessary and this can speed up build times. The only issue I’ve had is nix-index-database not working well with the shallow clone… Other than that no issues after running for a few months. # flake.nix inputs = { nixpkgs.url = "git+https://github.com/NixOS/nixpkgs?shallow=1&amp;ref=nixos-unstable"; }; Some times when you might need a full clone are debugging and working with repository history but those are rare. Import your Non-Flake Wallpaper Repo Importing your non-flake wallpapers repo: # flake.nix inputs = { wallpapers = { url = "github:saylesss88/wallpapers"; flake = false; }; } After adding the input I can access individual wallpapers by adding the inputs argument and something like path = "${inputs.wallpapers}/Aesthetic Scenery.jpg"; Understanding @-patterns Understanding @-patterns, being able to reference your outputs argument set as a whole. An @-pattern is a way for a function can access variadic attributes (i.e. varying number of arguments). # flake.nix inputs = { home-manager.url = "github:nix-community/home-manager/master"; home-manager.inputs.nixpkgs.follows = "nixpkgs"; stylix.url = "github:danth/stylix"; }; outputs = { self, nixpkgs, home-manager, } @ inputs: With the above example to add the modules to your nixosConfigurations you would add something like this:
...</p></div><footer class=entry-footer><span title='2025-05-14 19:24:27 -0400 EDT'>May 14, 2025</span>&nbsp;·&nbsp;T Sawyer</footer><a class=entry-link aria-label="post link to Nix_flakes_tips" href=https://tsawyer87.github.io/posts/nix_flakes_tips/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Working_with_nixpkgs_locally</h2></header><div class=entry-content><p>/home/jr/blog/content/posts/working_with_nixpkgs_locally.md: line 1: q: command not found
Working with Nixpkgs Locally: Benefits and Best Practices Nixpkgs, the package repository for NixOS, is a powerful resource for building and customizing software. Working with a local copy enhances development, debugging, and contribution workflows. This post covers setting up a local Nixpkgs repository, searching for dependencies, and leveraging its advantages, incorporating tips from the Nix community. I. Why Work with Nixpkgs Locally? A local Nixpkgs repository offers significant advantages for Nix developers:
...</p></div><footer class=entry-footer><span title='2025-05-14 19:23:32 -0400 EDT'>May 14, 2025</span>&nbsp;·&nbsp;T Sawyer</footer><a class=entry-link aria-label="post link to Working_with_nixpkgs_locally" href=https://tsawyer87.github.io/posts/working_with_nixpkgs_locally/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Building_your_config_as_a_package</h2></header><div class=entry-content><p>Building your configuration as a Package TL;DR This post demonstrates other ways to modularize your config as well as going into more advanced outputs.
This allows you to build your configuration as a package allowing you to separate the process of creating a configuration artifact and applying it to the live system giving you a reusable artifact that can be used to deploy to different systems. This can make it easier to isolate it from other parts of your system making debugging easier.
...</p></div><footer class=entry-footer><span title='2025-05-14 19:21:54 -0400 EDT'>May 14, 2025</span>&nbsp;·&nbsp;T Sawyer</footer><a class=entry-link aria-label="post link to Building_your_config_as_a_package" href=https://tsawyer87.github.io/posts/building_your_config_as_a_package/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Conditional_configuration</h2></header><div class=entry-content><p>Conditional Configuration With options it’s easy to conditionally install something based on if another program is enabled in your configuration.
Hyprland Module For example, if I have an option to enable or disable hyprland like this:
# hyprland.nix { pkgs, lib, config, inputs, ... }: let cfg = config.custom.hyprland; in { options.custom.hyprland = { enable = lib.mkOption { type = lib.types.bool; default = false; description = "Enable hyprland module"; }; }; config = lib.mkIf cfg.enable { home.packages = with pkgs; [ # swww grim slurp wl-clipboard-rs cliphist swappy ydotool wpaperd wofi hyprpicker pavucontrol blueman # lxqt.lxqt-policykit brightnessctl polkit_gnome wlr-randr wtype rose-pine-cursor # nwg-look # yad # gtk-engine-murrine ]; # .. snip .. Since the above module is set to false, it is necessary to add custom.hyprland.enable = true to my home.nix to have Nix add it to my configuration. And since home.packages is wrapped in config = lib.mkIf cfg.enable Those packages will only be installed if the module is enabled.
...</p></div><footer class=entry-footer><span title='2025-05-14 19:21:09 -0400 EDT'>May 14, 2025</span>&nbsp;·&nbsp;T Sawyer</footer><a class=entry-link aria-label="post link to Conditional_configuration" href=https://tsawyer87.github.io/posts/conditional_configuration/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://tsawyer87.github.io/posts/>«&nbsp;Prev&nbsp;
</a><a class=next href=https://tsawyer87.github.io/posts/page/3/>Next&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>&copy; 2025 <a href=https://tsawyer87.github.io/>NixOS Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>